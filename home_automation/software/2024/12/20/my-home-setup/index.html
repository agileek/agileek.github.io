<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>My home setup</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Yet another blog on software stuff">
    <meta name="google-site-verification" content="EFyUB6skWxpeeWVCFYgbmc_FK_E_Df_G17co5YEEg90" />
    <link rel="icon" type="image/png" href="/images/home.png" />
    <link rel="canonical" href="https://agileek.github.io/home_automation/software/2024/12/20/my-home-setup/">

    <!-- Custom CSS -->
    <link rel="stylesheet" href=" /css/asciinema-player.css " />
    <link rel="stylesheet" href=" /css/main.css ">
    <script>if(!sessionStorage.getItem("_swa")&&document.referrer.indexOf(location.protocol+"//"+location.host)!== 0){fetch("https://counter.dev/track?"+new URLSearchParams({referrer:document.referrer,screen:screen.width+"x"+screen.height,user:"mbitard",utcoffset:"1"}))};sessionStorage.setItem("_swa","1");</script>

    <script>
      var host = "agileek.github.io";
      if ((host == window.location.host) && (window.location.protocol != "https:"))
          window.location.protocol = "https";
    </script>
</head>


    <body>

    <header class="site-header">

  <div class="wrap">

    <a class="site-title" href="/"><img alt="home" src="/images/home.png" />Software</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
          <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
            h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
            h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
            c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
          
        
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
            
            <a class="page-link" href="/food/">Food</a>
            
          
        
          
        
          
            
            <a class="page-link" href="/about/">About</a>
            
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrap">
      <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">

    <meta property="twitter:card" content="summary" />
    <meta property="twitter:site" content="@BitardMichael" />
    <meta property="twitter:title" content="My home setup" />
    <meta property="twitter:description" content="This article will be a work in progress for as long as I play with home automation stuff Context I have been geeking aroung my home for a few years now. I have learned a lot, and still have a..." />
    <meta property="twitter:image" content="" />

    <meta itemprop="keywords" content="software,home_automation" />
    <meta itemprop="description" content="This article will be a work in progress for as long as I play with home automation stuff Context I have been geeking aroung my home for a few years now. I have learned a lot, and still have a..." />

    <header class="post-header">
        <h1 itemprop="name">My home setup</h1>
        <time class="meta" itemprop="datePublished" datetime="2024-12-20">Dec 20, 2024</time>
        
    </header>

    <div class="post-content" itemprop="articleBody">
        <p>This article will be a work in progress for as long as I play with home automation stuff</p>

<h2 id="context">Context</h2>

<p>I have been geeking aroung my home for a few years now.<br />
I have learned a lot, and still have a lot to learn…<br />
I have been frustrated by the state of the industry around open standards, interconnectivity and such.</p>

<h2 id="what-i-want">What I want</h2>

<p>I want everything to work in my house even if my home automation system is down.<br />
Every wall socket must work, every switch must work, no surprises.<br />
I want as much offline stuff as possible, wired if possible.</p>

<h2 id="what-i-dont-want">What I don’t want</h2>

<p>I don’t want proprietary lightbulb/wallplug… connected to the internet.<br />
I want as less WiFi as possible.</p>

<h2 id="what-i-have">What I have</h2>

<h3 id="software">Software</h3>

<ul>
  <li>Home assistant</li>
  <li>Zigbee2MQTT</li>
  <li>Adguard home</li>
  <li>ESPHome</li>
</ul>

<h3 id="hardware">Hardware</h3>

<ul>
  <li>Rpi 3</li>
  <li>Intel NUC</li>
  <li>RazBerry</li>
  <li>Sonoff Zigbee USB Dongle USB</li>
  <li>RFXCom</li>
  <li>KLF200</li>
</ul>

<h4 id="control-the-lights">Control the lights</h4>

<p>For “simple” switchs, I use <a href="https://sonoff.tech/product/diy-smart-switches/zbmini/">Sonoff zbmini</a>.<br />
It’s easy, you can hide them behind the wall switch, the ceiling lamp.<br />
They release the <a href="https://sonoff.tech/product/diy-smart-switches/zbmini-l2/">L2</a> version where you don’t need a neutral anymore.</p>

<p>For dimmers, I have some zwave devices, because I couldn’t find the zigbee equivalent yet.<br />
I use the <a href="https://manuals.fibaro.com/dimmer-2/">Fibaro FGD212</a> and they work really well.<br />
They have a neat hack, where you can trigger custom stuff on triple click (they call it scene activation).<br />
I shutdown all my ground floor by triple clicking my living room’s wall switch.</p>

<p>For “smart plugs”, I used these <a href="https://sonoff.tech/product-document/diy-smart-switches-doc/basiczbr3-doc/">sonoff smart switches</a> but now I’m rather happy with the <a href="https://sonoff.tech/product/s26r2zb/">S26R2ZB</a>, the only missing thing is the device consumption.</p>

<h4 id="control-the-heating">Control the heating</h4>

<p>I have 2 different needs.</p>

<p>The first one is controling the hvac system I have in my office ( it is located outside the house, in the garage, and is not part of the home heating system).<br />
Before the HVAC system I had a simple electric radiator and it was easy to control through home assistant, that way I could heat it before having to work.<br />
Now I have a Toshiba RAS-B05E2KVG-E and it’s quite difficult to interact with it without the official remote, so I setup a little esp32 with an IR transmitter and it seems to work.<br />
I still have to play with it before talking more about it.</p>

<p>My second need is controlling the home heating system.<br />
Right now I have an Atlantic air-to-water HVAC and it works really well.<br />
But since it is some IO-home control stuff, it’s kind of difficult to plug it to a home automation system (that is, without spending a few hundred € for a proprietary sh*t connected to my WiFi).<br />
And of course, the KLF200, which an IO homecontrol box, does not work with the heating systems.<br />
Noooo, you have to buy a whole new box just for that.<br />
I have heard of some project working on a somfy hack that could allow us to get rid of this IO homecontrol monopoly.</p>

<h4 id="control-the-shutters">Control the shutters</h4>

<p>I had no choice, with our veranda came some roller shutter by Somfy.
And worse of it, Somfy IO.<br />
They have their shitty home-control protocol and everything is really expensive, not really easy to interconnect, so if you can, avoid them.<br />
My first solution was to solder a remote control I bought on EBay, and it worked great. Not having the states of my shutters really bothered me, though, so in the end I stopped using this.<br />
I waited for some “Black friday sale” and bought a KLF200.
It works quite well and, of course, it’s been discontinued by velux so it’s difficult to find them anymore…</p>

<h4 id="sensors">Sensors</h4>

<p>I have two different wireless technology for the sensors.<br />
I started with the 433.92Mhz.<br />
They are cheap, resistant (I have one of them in my freezer, the triggers alarms in case the temperature rises too much, it works really well), and are quite resilient, and, if your sensor is in range of your receiver, it will work really well (I even receive my neighbours sensors…)</p>

<p>Now that I have a correct zigbee network, I have some <a href="https://sonoff.tech/product/gateway-and-sensors/snzb-02/">temperature/humidity</a> sensors and I’m quite happy with them.\ Even though I don’t like having the CR2032 battery.</p>

<p>I also played with <a href="https://sonoff.tech/product/gateway-and-sensors/snzb-04/">Wireless Door/Window Sensor</a> but I find them quite unreliable, and I won’t rely on them to build a home alarm system.</p>

<p>I tried a <a href="https://sonoff.tech/product/gateway-and-sensors/snzb-03/">motion sensor</a>, it seems to work well, but I don’t really have a scenario to use them.<br />
I tried pairing them with a light to automatically switch a light when motion is detected but I find it really slow to detect/light, so, in stairs for example it’s not really practical.<br />
I’ll try it outdoor to light the garage door at nigth, maybe it’ll be more useful.</p>

<h4 id="garden">Garden</h4>

<p>I’m afraid of messing with the water system, so I haven’t done anything yet, except some automatic garden lights, but still have some DIY ideas.</p>

<h4 id="zigbee">Zigbee</h4>

<p>With zigbee2mqtt I discovered that we can link two components together, so they can work autonomously.<br />
For example I have a <a href="https://sonoff.tech/product/gateway-and-sensors/snzb-03/">motion sensor</a> that can be paired with <a href="https://sonoff.tech/product/diy-smart-switches/zbmini/">a smart switch</a>.<br />
That works really great, and the good part is, if your box is down, it still works, they are full autonomous.<br />
Unfortunately, a lot of zigbee sensors does not expose the right commands and you can’t do that with everything.</p>

<p>For example the <a href="https://sonoff.tech/product/gateway-and-sensors/snzb-04/">Wireless Door/Window Sensor</a> does not expose the right command so it’s impossible to directly pair them with something else, and you have to do a home assistant automation if you want to link them with something else.</p>


    </div>

    <script src="/js/asciinema-player.js"></script>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'agileek';
        (function () {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the
        <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
    </noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by
        <span class="logo-disqus">Disqus</span>
    </a>

</article>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrap">
    <div>
      <p class="text">Yet another blog on software stuff</p>
    </div>
  </div>
</footer>


    </body>
</html>